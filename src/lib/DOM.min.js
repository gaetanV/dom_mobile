var DOM;!function(){"use strict";DOM=function(){var e={fps:24},t={mouseup:[],click:[],mousemove:[],mousewheel:[],refresh:[],resize:[]},o=function(e){if(e.targetTouches){if(1===e.targetTouches.length){var t=e.targetTouches[0];e.touch={x:t.pageX,y:t.pageY}}}else e.touch={x:e.clientX,y:e.clientY}},n={refresh:function(){for(var e in t.refresh)t.refresh[e]()},click:function(e){o(e);for(var n in t.click)t.click[n](e);return!1},resize:function(e){o(e);for(var n in t.resize)t.resize[n](e);return!1},mousemove:function(e){o(e);for(var n in t.mousemove)t.mousemove[n](e)},mousewheel:function(e){o(e);for(var n in t.mousewheel)t.mousewheel[n](e)},mouseup:function(e){o(e);for(var n in t.mouseup)t.mouseup[n](e)}};return setInterval(n.refresh,e.fps),window.addEventListener("resize",n.resize),document.addEventListener(/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",n.mousewheel),"ontouchstart"in window||navigator.maxTouchPoints?(document.addEventListener("touchstart",n.click),document.addEventListener("touchmove",n.mousemove),document.addEventListener("touchend",n.mouseup),document.addEventListener("touchleave",n.mouseup)):(document.addEventListener("mousedown",n.click),document.addEventListener("mousemove",n.mousemove),document.addEventListener("mouseup",n.mouseup),document.addEventListener("mouseout",function(e){null==e.toElement&&null==e.relatedTarget&&n.mouseup(e)})),{extendDOM:function(e){"undefined"!=typeof jQuery&&jQuery.fn.extend(e);for(var t in e)HTMLElement.prototype[t]=e[t]},extendEVENT:function(e){for(var o in e)switch(o){default:throw o+" is not a known extendEVENT";case"click":t.click.push(e[o]);break;case"mouseup":t.mouseup.push(e[o]);break;case"mousemove":t.mousemove.push(e[o]);break;case"mousewheel":t.mousewheel.push(e[o]);break;case"refresh":t.refresh.push(e[o]);break;case"resize":t.resize.push(e[o])}},selection:function(e){if(e){var t=document.querySelector("*");t.style.MozUserSelect="text",t.style.webkitUserSelect="text",t.style.oUserSelect="text",t.style.khtmlUserSelect="text",t.style.msUserSelect="text",t.style.userSelect="text"}else{var t=document.querySelector("*");t.style.MozUserSelect="none",t.style.webkitUserSelect="none",t.style.oUserSelect="none",t.style.khtmlUserSelect="none",t.style.msUserSelect="none",t.style.userSelect="none"}}}}(),DOM.selection(!1)}(),function(){"use strict";DOM.extendDOM({toNatif:function(){return"undefined"!=typeof jQuery&&this instanceof jQuery?this[0]:this},getTransform:function(){var e=this.toNatif(),t=window.getComputedStyle(e),o=0,n=0,i=t.transform;if("none"!=i){var r=/\((.*)\)/,s=r.exec(t.transform),a=s[1].split(",");o=parseInt(a[4]),n=parseInt(a[5])}return{x:o,y:n}},inPage:function(){var e=this.toNatif();return e!==document.body&&document.body.contains(e)},getOffset:function(){var e=this.toNatif(),t=jQueryToNatif(e),o=t.getBoundingClientRect(),n=window.getComputedStyle(e),i=parseInt(n.paddingTop,10),r=parseInt(n.paddingBottom,10),s=parseInt(n.paddingLeft,10),a=parseInt(n.paddingRight,10),c=t.clientHeight,l=parseInt(n.marginTop,10),u=parseInt(n.borderTopWidth,10);c+=l+u,c+=parseInt(n.borderBottomWidth,10),c+=parseInt(n.marginBottom,10);var f=t.clientWidth;f+=parseInt(n.marginRight,10),f+=parseInt(n.borderRightWidth,10);var m=parseInt(n.marginLeft,10),d=parseInt(n.borderLeftWidth,10);return f+=d+m,{left:o.left+window.scrollX-m,top:o.top+window.scrollY-l,outer:{height:c,width:f},inner:{height:t.clientHeight-(i+r),width:t.clientWidth-(a+s)}}}}),HTMLElement.prototype.removeClass=function(e){if("string"==typeof e){e=e.trim();var t,o,n;n=e.split(" "),o=this.className.split(" ");for(var i=0;i<n.length;i++){var r=n[i];t=o.indexOf(r),t!==-1&&o.splice(t,1)}return this.className=o.join(" "),!0}return!1},HTMLElement.prototype.addClass=function(e){if("string"==typeof e){e=e.trim();var t,o;t=this.className?this.className.split(" "):[],o=e.split(" ");for(var n=0;n<o.length;n++){var i=o[n];t.indexOf(i)===-1&&t.push(i)}return this.className=t.join(" "),!0}return!1}}(),function(){"use strict";var e=function(e,t,o,n){var i=[1,0,0,1,0,0],r=performance.now(),s=window.getComputedStyle(e),a=s.transform;if("none"!=a){var c=/\((.*)\)/.exec(a);i=c[1].split(",")}this.matrix=i,this.timeStart=r,this.timeEnd=r,this.speed=o,this.dom=e,this.css={transitionDuration:s.transitionDuration,transitionProperty:s.transitionProperty,transitionDelay:s.transitionDelay},e.style.transition="none";var l=e.getTransform(),u=parseInt(e.style.left),f=parseInt(e.style.top);0===l.y&&0===l.x||(e.offsetHeight,0!==l.y&&(e.style.top=f+l.y+"px"),0!==l.x&&(e.style.left=u+l.x+"px")),this.css.left=s.left,this.css.top=s.top,this.transform={start:{x:0,y:0},end:{x:0,y:0}},this.pos={start:{x:u,y:f},end:{x:u,y:f}},this.way=t,this.callback=n,this.refresh=!1};(function(){var t=!1;DOM.extendDOM({move:function(o,n,i){var r=this.toNatif();t=new e(r,o,n,i)}}),DOM.extendEVENT({refresh:function(){if(t){var e=t;if(e.refresh){var o=e.refresh.touch,n=0,i=0;switch(e.way){case"-x":n+=(e.mouse.x-o.x)*e.speed;break;case"x":n-=(e.mouse.x-o.x)*e.speed;break;case"-y":i+=(e.mouse.y-o.y)*e.speed;break;case"y":i-=(e.mouse.y-o.y)*e.speed;break;case"xy":n-=(e.mouse.x-o.x)*e.speed,i-=(e.mouse.y-o.y)*e.speed}e.transform.end={y:i,x:n},e.dom.style.transform="matrix("+e.matrix[0]+","+e.matrix[1]+","+e.matrix[2]+","+e.matrix[3]+", "+n+", "+i+")",e.refresh=!1}}},mousemove:function(e){t&&(t.mouse||(t.mouse=e.touch),t.refresh=e)},mouseup:function(e){t&&o.stopDragAndDrop()}});var o={stopDragAndDrop:function(){t.pos.end={x:parseInt(t.css.left)+t.transform.end.x,y:parseInt(t.css.top)+t.transform.end.y},t.timeEnd=performance.now();var e=window.getComputedStyle(t.dom);t.dom.style.transform="matrix("+t.matrix[0]+","+t.matrix[1]+","+t.matrix[2]+","+t.matrix[3]+",0,0)","absolute"!=e.position&&"fixed"!=e.position&&"relative"!=e.position||(t.dom.style.top=parseInt(t.css.top)+t.transform.end.y+"px",t.dom.style.left=parseInt(t.css.left)+t.transform.end.x+"px");var o=t.timeEnd-t.timeStart,n=Math.abs(t.transform.end.x),i=Math.abs(t.transform.end.y);t.vitesse={x:1/(1*o/n),y:1/(1*o/i)},t.dom.offsetHeight,t.dom.style.transitionDuration=t.css.transitionDuration,t.dom.style.transitionProperty=t.css.transitionProperty,t.dom.style.transitionDelay=t.css.transitionDelay,t.callback(t),t=!1}}})()}(),function(){"use strict";var e=!1,t=function(t){this.target=t.target,this.timeStart=performance.now(),this.mouseStart={x:t.touch.x,y:t.touch.y},this.vitesse={x:0,y:0},this.origin=t.target,this.mouseEnd={x:t.touch.x,y:t.touch.y},this.etat="init",e&&clearTimeout(e)};(function(){var o="data-touchevent",n={timeLongclick:400,timeDbclick:200,debug:!1},i=!1,r={x:window.innerWidth,y:window.innerHeight},s=function(e){n.debug&&console.log(e)},a=function(e,t){for(;null!=e;){if(e[o]&&"function"==typeof e[o][t])return e;var e=e.parentNode}return!1};DOM.extendDOM({touchevent:function(e,t){var n=this.toNatif(),i=function(e,t){if("function"!=typeof t)throw"callback need to be a function";if(!n.inPage())throw"We can't register a event on a dom not in body";if(n[o]||(n[o]={}),n[o][e])throw"Event "+e+" is already defined";n[o][e]=t};switch(e){default:throw e+"is not a known event try touchX or touchY";case"click":i("click",t);break;case"longclick":i("longclick",t);break;case"longclickup":i("longclickup",t);break;case"touchX":i("touchX",t);break;case"touchY":i("touchY",t);break;case"dbclick":i("dbclick",t);break;case"scrollUp":i("scrollUp",t);break;case"scrollDown":i("scrollDown",t);break;case"resizeX":i("resizeX",t),n.addClass("resizeX");break;case"resizeY":i("resizeY",t),n.addClass("resizeY")}}}),DOM.extendEVENT({resize:function(e){var t={x:window.innerWidth,y:window.innerHeight};if(t.x!==r.x){r.x=t.x;for(var n=document.querySelectorAll(".resizeX"),i=0;i<n.length;i++){var s=n[i];s[o]&&"function"==typeof s[o].resizeX&&s[o].resizeX(e)}}if(t.y!==r.y){r.y=t.y;for(var n=document.querySelectorAll(".resizeY"),i=0;i<n.length;i++){var s=n[i];s[o]&&"function"==typeof s[o].resizeY&&s[o].resizeY(e)}}},click:function(o){i?"waitclick"===i.etat&&c.stopDbClick():(s("init"),i=new t(o),i.timeout&&clearTimeout(i.timeout),e=setTimeout(function(){c.startLongClick()},n.timeLongclick))},mousemove:function(e){i&&"init"===i.etat&&(Math.abs(e.touch.x-i.mouseStart.x)>4||Math.abs(e.clientY-i.mouseStart.y)>4)&&c.stopFindYourWay(e)},mouseup:function(t){if(i)switch(i.etat){default:s("event end by mouseup"),i=!1;break;case"waitlongclick":c.stopLongClick();break;case"init":var o=a(i.target,"dbclick");o?(s("waitclick"),i.etat="waitclick",e&&clearTimeout(e),e=setTimeout(function(){"waitclick"===i.etat&&c.stopClick()},n.timeDbclick)):c.stopClick()}},mousewheel:function(e){i||(i=new t(e),i.etat="scroll",e.detail>0?c.stopScrollDown():c.stopScrollUp(),"scrollUp"!=i.etat&&"scrollDown"!=i.etat||e.preventDefault(),i=!1)}});var c={stopScrollUp:function(){if(i&&"scroll"===i.etat){var e=a(i.target,"scrollUp");e&&(i.target=e,i.etat="scrollUp",e[o].scrollUp(i))}},stopScrollDown:function(){if(i&&"scroll"===i.etat){var e=a(i.target,"scrollDown");e&&(i.target=e,i.etat="scrollDown",e[o].scrollDown(i))}},startLongClick:function(){if(i&&"init"===i.etat){var e=i.target,t=a(i.target,"longclick");t&&(i.etat="waitlongclick",s("waitlongclick"),e[o].longclick(i),i.target=t)}},stopLongClick:function(){if(!i)throw"stopLongClick is call without event";var e=i.target;i.etat="longclick",s("longclick"),e[o]&&"function"==typeof e[o].longclickup&&e[o].longclickup(i),i=!1},stopClick:function(){if(i){if("init"===i.etat||"waitclick"===i.etat){i.etat="click",s("click");var e=i.target,t=a(i.target,"click");t&&e[o].click(i)}i=!1}},stopDbClick:function(){if(i&&"waitclick"===i.etat){i.etat="dbclick",s("dbclick");var e=i.target,t=a(i.target,"dbclick");t&&e[o].dbclick(i),i=!1}},stopFindYourWay:function(e){if(i&&"init"===i.etat){var t=Math.abs(e.touch.x-i.mouseStart.x)>Math.abs(e.touch.y-i.mouseStart.y);if(t){i.etat="moveX",s("moveX");var n=a(e.target,"touchX");n&&n[o].touchX(i)}else{i.etat="moveY",s("moveY");var n=a(e.target,"touchY");n&&n[o].touchY(i)}i=!1}}}})()}();