<html>
    <head>
        <title>DOM MOBILE</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <script src="../lib/jquery.min.js"></script>
          <script src="../lib/DOM.js"></script>
          <style>
              
              #test{
                  background: red;
                  padding: 50px;
                  position: absolute;
                  margin: 50px;
                  cursor: pointer;
              }
              #test2{
                  
                     background: white;
                  padding: 50px;
                  border:solid 1px;
                 
                  cursor: pointer;
              }
              </style>
    </head>
    <body>
        Vitesse X
          <div id="vitesseX">
            0
            
        </div>
         Vitesse Y
         <div id="vitesseY">
            0
            
        </div>
        <div id="direction">
            0
            
        </div>
           <div id="test2" onMousedown="longclick(event)">
            LONGCLICK
            
        </div>
        <div id="test" onMousedown="dragAndDrop(event)">
            MOTION TARGET
            
        </div>
       
       <script>




        DOM.selection(false);
        var longclick=function(e){
            
             $(e.target).css({"background":"white"});
             
             var cancel=function(e){
                   $(e.target).css({"background":"white"});
            } 
            
            
            var callback=function(e){
                
               
               if(e.etat=="click"){
                   $(e.target).css({"background":"blue"});
                   
               }
               if(e.etat=="longclick"){
                    $(e.target).css({"background":"red"});
               }
               if(e.etat=="longclickend"){
                    $(e.target).css({"background":"white"});
               }
               
            }
            DOM.onlongclick(e,callback,cancel)
        }
        
         var moveX=function(e){
             function callback(dom){
                 console.log("moveXend");
                 $("#vitesseX").html(dom.vitesse.x);
        
             }
             DOM.move($("#test"),"x",1,callback);
             $("#direction").html("moveX");
           
         } 
         var moveY=function(e){
             
            function callback(dom){
                 console.log("moveYend");
                 $("#vitesseY").html(dom.vitesse.y);
             }
            
             DOM.move($("#test"),"y",1,callback);
               $("#direction").html("moveY");
         }
          function dragAndDrop(e){
              console.log("click");
               DOM.findYourWay(e,function(movement){
                      var direction=Math.abs(movement.x)>Math.abs(movement.y);
                      console.log(direction);
                      direction?moveX():moveY();
                  },function(){console.log("cancel");});
            };
        
        </script>
    </body>
</html>
